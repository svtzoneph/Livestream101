<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover"/>
<title>Livestream101</title>

<meta name="title" content="LIVESTREAM101">
<meta name="description" content="Watch K-Contents for free">
<meta property="og:type" content="website">
<meta property="og:url" content="https://livestream101.vercel.app/">
<meta property="og:title" content="LIVESTREAM101">
<meta property="og:description" content="Watch K-Contents for free">
<meta property="og:image" content="https://uploads.onecompiler.io/43ddry4jt/447whtmmg/This%20live%20event%20has%20ended..png">
<meta property="og:site_name" content="LIVESTREAM101">
<meta property="og:locale" content="en_PH">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:url" content="https://livestream101.vercel.app/">
<meta name="twitter:title" content="LIVESTREAM101">
<meta name="twitter:description" content="2025 KBS Gayo Daechukje">
<meta name="twitter:image" content="">
<meta name="twitter:site" content="@101_livestream">

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js"></script>
<link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />

<style>
:root {
  --bg: #0f0f0f;
  --text: #fff;
  --accent: #3ea6ff;
  --heart-color: #ff4081;
}

body {
  margin: 0;
  font-family: 'Roboto', sans-serif;
  background-color: var(--bg);
  color: var(--text);
  display: flex;
  flex-direction: column;
  min-height: 100vh;
   user-select: none;
  -webkit-user-select: none;
  box-sizing: border-box;
}

*, *:before, *:after {
  box-sizing: inherit;
}

/* Header */
header {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  justify-content: space-between;
  padding: 10px 20px;
  background: #181818;
  position: sticky;
  top: 0;
  z-index: 100;
}

.logo { font-size: 1.6rem; font-weight: 900; }
.search-bar input {
  width: 100%;
  max-width: 300px;
  padding: 8px;
  border: none;
  background: #121212;
  color: #fff;
  border-radius: 6px;
}

/* Main Layout */
.video-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px 10px;
  gap: 20px;
  color: white;
  width: 100%;
  flex: 1;
}

.videos {
  display: grid;
  grid-template-columns: 1fr;
  gap: 15px;
  width: 95%;
  max-width: 900px;
}

/* VIDEO BOX */
.video-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: #181818;
  padding: 0;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  position: relative;
  width: 100%;
  overflow: hidden;
}

.player {
  width: 100%;
  aspect-ratio: 16 / 9;
  background: #000;
  display: block;
}

.video-label {
  margin: 15px 0;
  font-size: 18px;
  color: #fff;
  text-align: center;
  font-weight: 600;
}

/* --- OVERLAYS INSIDE VIDEO (Top Left) --- */
.video-overlay-container {
  position: absolute;
  top: 20px;
  left: 20px;
  display: flex;
  align-items: center;
  gap: 15px;
  z-index: 2147483647; 
  background: rgba(0, 0, 0, 0.6);
  padding: 8px 14px;
  border-radius: 20px;
  pointer-events: none; 
  backdrop-filter: blur(4px);
  opacity: 1;
  transition: opacity 0.3s ease;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 0.95rem;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 1px 2px rgba(0,0,0,0.8);
}

.stat-item svg {
  width: 18px;
  height: 18px;
  fill: #fff;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,0.5));
}


/* --- UPDATED REALISTIC FLOATING HEARTS ANIMATION --- */
#floatingHeartsContainer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 90%; /* Go slightly higher */
    pointer-events: none;
    z-index: 20;
    overflow: hidden;
}

.floating-heart {
    position: absolute;
    bottom: -20px; /* Start slightly below view */
    /* Default values, overridden by JS */
    --fly-duration: 3s;
    --fly-distance: -400px;
    --rotation-end: 360deg;
    --scale-start: 0.5;
    --scale-end: 1.5;
    --wobble-dir: 30px;
    
    color: var(--heart-color);
    opacity: 0;
    will-change: transform, opacity; /* Performance optimization */
    animation: floatUpRealistic var(--fly-duration) ease-out forwards;
    filter: drop-shadow(0 0 2px rgba(0,0,0,0.3));
}

@keyframes floatUpRealistic {
    0% {
        transform: translateY(0) translateX(0) scale(var(--scale-start)) rotate(0deg);
        opacity: 0;
    }
    10% {
        opacity: 0.8; /* Fade in quickly */
    }
    33% {
        /* Drift one way */
        transform: translateY(calc(var(--fly-distance) * 0.33)) translateX(calc(var(--wobble-dir) * -1)) scale(0.9) rotate(calc(var(--rotation-end) * 0.33));
    }
    66% {
         /* Drift other way */
        transform: translateY(calc(var(--fly-distance) * 0.66)) translateX(var(--wobble-dir)) scale(1.2) rotate(calc(var(--rotation-end) * 0.66));
        opacity: 1;
    }
    100% {
        /* End point: high up, tumbled, large, faded out */
        transform: translateY(var(--fly-distance)) translateX(calc(var(--wobble-dir) * 0.5)) scale(var(--scale-end)) rotate(var(--rotation-end));
        opacity: 0;
    }
}


/* --- BELOW VIDEO ACTIONS --- */
.below-video-actions {
  width: 95%;
  max-width: 900px;
  display: flex;
  justify-content: space-between; 
  align-items: center;
  padding: 10px 5px;
}

.left-stats-display {
    display: flex;
    gap: 20px;
    align-items: center;
}

.text-stat {
    display: flex;
    align-items: center;
    gap: 8px;
    color: #ccc;
    font-size: 1rem;
    font-weight: 500;
}

.text-stat strong {
    color: #fff;
    font-size: 1.1rem;
}

.heart-spam-container {
    display: flex;
    align-items: center;
    background: #272727;
    padding: 8px 12px;
    border-radius: 30px;
    border: 1px solid #333;
    transition: background 0.2s, transform 0.1s;
    cursor: pointer;
}

.heart-spam-container:hover {
    background: #333;
}
.heart-spam-container:active {
    transform: scale(0.95); /* Whole container pulses */
}

.heart-spam-btn {
    background: transparent;
    border: none;
    color: var(--heart-color);
    padding: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    outline: none;
    pointer-events: none; /* Let container handle click */
}


.heart-spam-btn svg {
    width: 28px;
    height: 28px;
    fill: currentColor;
    filter: drop-shadow(0 0 5px rgba(255, 64, 129, 0.4));
}


/* Lineup Box Styles */
.lineup-box {
  width: 95%;
  max-width: 900px;
  background: #181818;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  text-align: center;
  margin-top: 20px; 
}
.schedule-section { border-bottom: 1px solid #333; padding-bottom: 20px; margin-bottom: 20px; }
.schedule-date { font-size: 1.4rem; font-weight: 800; color: #fff; letter-spacing: 1px; margin-bottom: 5px; }
.schedule-time { font-size: 1.2rem; font-weight: 600; color: var(--accent); margin-bottom: 5px; }
.timer-note { font-size: 0.9rem; color: #888; margin-bottom: 20px; font-style: italic; }
.schedule-timer-container { display: flex; justify-content: center; gap: 20px; margin-top: 10px; }
.timer-block { display: flex; flex-direction: column; align-items: center; }
.timer-number { font-size: 2.5rem; font-weight: 900; color: #fff; line-height: 1; }
.timer-label { font-size: 0.8rem; color: #aaa; text-transform: uppercase; margin-top: 5px; font-weight: 500; }
.timer-separator { font-size: 2rem; font-weight: 900; color: #fff; margin-top: -5px; }
@media screen and (max-width: 480px) {
  .timer-number { font-size: 1.8rem; }
  .timer-label { font-size: 0.7rem; }
  .schedule-timer-container { gap: 10px; }
  .text-stat { font-size: 0.9rem; }
}
.lineup-title { color: #ddd; font-size: 1.3rem; font-weight: 700; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; }
.lineup-list { color: #ccc; font-size: 1rem; line-height: 1.8; font-weight: 500; }
.dot-separator { color: #555; margin: 0 8px; font-size: 0.8rem; vertical-align: middle; }

/* Watermark */
.video-box .watermark {
  position: absolute;
  bottom: 20px; right: 40px; width: 80px; opacity: 0.8;
  pointer-events: none; user-select: none; z-index: 9999;
  transition: all 0.3s ease;
}

/* LANDSCAPE / FULLSCREEN MODE STYLES */
.plyr--fullscreen {
  border-radius: 0 !important; margin: 0 !important; width: 100vw !important; height: 100vh !important;
  max-width: none !important; max-height: none !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important;
  background: #000 !important; position: fixed !important; z-index: 100000 !important;
  display: flex !important; justify-content: center !important; align-items: center !important;
  padding-left: env(safe-area-inset-left) !important; padding-right: env(safe-area-inset-right) !important;
}
.plyr--fullscreen video { width: 100% !important; height: 100% !important; object-fit: contain !important; }

/* Footer */
footer { background: #181818; color: #aaa; padding: 30px 20px; text-align: center; font-size: 14px; border-top: 1px solid #333; margin-top: auto; }
.social-handles { margin-top: 10px; display: flex; justify-content: center; gap: 15px; }
.social-handles a { color: var(--accent); text-decoration: none; }

/* Plyr controls overrides */
:root { --plyr-color-main: var(--accent); }
.plyr__control:hover, .plyr__control--pressed { color: #fff !important; }
.plyr__progress--played { background: var(--accent) !important; }

/* Fixed About Button & Modal */
#aboutBtn { position: fixed; bottom: 20px; right: 20px; z-index: 9999; background:linear-gradient(to bottom, #000000, #1a1a1a); color: #fff; border: none; padding: 12px 18px; border-radius: 50px; font-weight: bold; cursor: pointer; box-shadow: 0 4px 12px rgba(0,0,0,0.4); transition: transform 0.2s; font-size: 16px; }
#aboutBtn:hover { transform: scale(1.05); }
.modal { display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); }
.modal-content { background-color: #181818; margin: 10% auto; padding: 20px 30px; border-radius: 12px; max-width: 500px; color: #fff; position: relative; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
.modal-content h2 { margin-top: 0; color: var(--accent); }
.modal-content p { line-height: 1.6; color: #ccc; }
.modal-content .close { position: absolute; top: 10px; right: 15px; color: #aaa; font-size: 28px; font-weight: bold; cursor: pointer; }
.modal-content .close:hover { color: #fff; }
@media screen and (max-width: 480px) {
  #aboutBtn { padding: 10px 14px; font-size: 14px; bottom: 15px; right: 15px; }
  .modal-content { margin: 20% auto; padding: 15px 20px; }
  .modal-content h2 { font-size: 1.3rem; }
  .modal-content p { font-size: 0.9rem; }
}
</style>
</head>
<body>

<header>
  <div class="logo">LIVESTREAM101</div>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search videos...">
  </div>
</header>

<button id="aboutBtn">About</button>

<div id="aboutModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>About LIVESTREAM101</h2>
    <p>Welcome to <strong>LIVESTREAM101</strong> (formerly Enhypen Stream)!<br><br>Your platform for high-quality live streaming of K-Contents.<br><br>We provide free streaming with no payments and no ads.<br>We also provide <strong>VODs of other K-Contents</strong> that we stream.<br><br>If you have a request, just send us a message on our <a href="https://x.com/101_livestream" target="_blank"><strong>X account</strong></a>.<br><br>Enjoy your favorite shows anytime, anywhere, for free!</p>
  </div>
</div>

<div class="video-container" id="videoPage">

  <div class="videos">
    <div class="video-box">
       
      <div class="video-overlay-container" id="videoOverlay">
          <div class="stat-item">
              <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
              <span id="overlayViewerCount">0</span>
          </div>
          <div class="stat-item">
              <svg viewBox="0 0 24 24"><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/></svg>
              <span id="overlayHeartCount">0</span>
          </div>
      </div>

      <div id="floatingHeartsContainer"></div>

      <video id="player1" class="player" playsinline controls crossorigin
        poster="https://uploads.onecompiler.io/43ddry4jt/447whtmmg/This%20live%20event%20has%20ended..png">
      </video>
      <h4 class="video-label">2025 KBS Gayo Daechukje</h4>
    </div>
  </div>


  <div class="below-video-actions">
      <div class="left-stats-display">
        <div class="text-stat">
            <svg viewBox="0 0 24 24" style="width:20px;height:20px;fill:#ccc"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            <strong id="textViewerCount">0</strong>
        </div>
        <div class="text-stat">
             <svg viewBox="0 0 24 24" style="width:20px;height:20px;fill:var(--heart-color)"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
             <strong id="textHeartCount">0</strong>
        </div>
      </div>

      <div class="heart-spam-container" id="heartSpamContainer">
          <button class="heart-spam-btn">
              <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
          </button>
      </div>
  </div>


  <div class="lineup-box">
    <div class="schedule-section">
      <div class="schedule-date">DECEMBER 19, 2025</div>
      <div class="schedule-time">7:15PM KST | 6:15 PM PHT</div>
      <div class="timer-note">Note: The timer below is based on PHT time.</div>
      <div class="schedule-timer-container" id="scheduleTimer">
        <div class="timer-block"><span class="timer-number" id="t-days">00</span><span class="timer-label">Days</span></div><div class="timer-separator">:</div>
        <div class="timer-block"><span class="timer-number" id="t-hours">00</span><span class="timer-label">Hours</span></div><div class="timer-separator">:</div>
        <div class="timer-block"><span class="timer-number" id="t-minutes">00</span><span class="timer-label">Minutes</span></div><div class="timer-separator">:</div>
        <div class="timer-block"><span class="timer-number" id="t-seconds">00</span><span class="timer-label">Seconds</span></div>
      </div>
    </div>
    <div class="lineup-title">2025 KBS Gayo Daechukje Line Up</div>
    <div class="lineup-list">
      NCT DREAM <span class="dot-separator">•</span> MARK <span class="dot-separator">•</span> HAECHAN <span class="dot-separator">•</span> AHOF <span class="dot-separator">•</span> P1HARMONY <span class="dot-separator">•</span> THE BOYZ <span class="dot-separator">•</span> tripleS <span class="dot-separator">•</span> aespa <span class="dot-separator">•</span> LE SSERAFIM <span class="dot-separator">•</span> KISS OF LIFE <span class="dot-separator">•</span> n.SSign <span class="dot-separator">•</span> EVNNE <span class="dot-separator">•</span> CLOSE YOUR EYES <span class="dot-separator">•</span> HITGS <span class="dot-separator">•</span> Baby DONT Cry <span class="dot-separator">•</span> fromis_9 <span class="dot-separator">•</span> STAYC <span class="dot-separator">•</span> LOVELYZ <span class="dot-separator">•</span> DAYOUNG <span class="dot-separator">•</span> CNBLUE <span class="dot-separator">•</span> LEE CHANWON <span class="dot-separator">•</span> PARK SEOJIN <span class="dot-separator">•</span> 10CM <span class="dot-separator">•</span> ROY KIM <span class="dot-separator">•</span> JANNABI
    </div>
  </div>
</div>

<script>
(function() {
  const d=document.getElementById('t-days'),h=document.getElementById('t-hours'),m=document.getElementById('t-minutes'),s=document.getElementById('t-seconds');
  const countDownDate = new Date("2025-12-19T18:15:00+08:00").getTime();
  const updateTimer = setInterval(function() {
    const now = new Date().getTime(), distance = countDownDate - now;
    if (distance < 0) { clearInterval(updateTimer); return; }
    d.innerHTML = Math.floor(distance / (1000 * 60 * 60 * 24));
    h.innerHTML = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
    m.innerHTML = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
    s.innerHTML = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');
  }, 1000);
})();
</script>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, onValue, set, onDisconnect, push, runTransaction } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAJ14uN4-dajZiNMwYMiYcLCRu0KZ2GNbg",
    authDomain: "svtonair.firebaseapp.com",
    databaseURL: "https://svtonair-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "svtonair",
    storageBucket: "svtonair.firebasestorage.app",
    messagingSenderId: "1407706609",
    appId: "1:1407706609:web:b4e2c33bdb4b0da334d050"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const streamId = "stream_kbs_2025";

  // --- 1. REALTIME VIEWERS ---
  let userId = localStorage.getItem("ls101_anon_id");
  if (!userId) { userId = 'anon_' + Math.random().toString(36).substr(2, 9); localStorage.setItem("ls101_anon_id", userId); }

  const connectedRef = ref(db, ".info/connected");
  const viewersRef = ref(db, `livestream/${streamId}/viewers`);
  const myViewerRef = push(viewersRef);

  // This handles the +1 (join) and -1 (leave) logic
  onValue(connectedRef, (snap) => {
    if (snap.val() === true) {
      // User connected: Add to DB (+1)
      set(myViewerRef, { joined: Date.now() });
      
      // User disconnected/closed tab: Remove from DB (-1)
      onDisconnect(myViewerRef).remove();
    }
  });

  const overlayViewerCountElem = document.getElementById("overlayViewerCount");
  const textViewerCountElem = document.getElementById("textViewerCount");

  onValue(viewersRef, (snap) => {
    const count = snap.exists() ? Object.keys(snap.val()).length : 0;
    // Uses the new full number format
    const formatted = formatCount(count);
    overlayViewerCountElem.innerText = formatted;
    textViewerCountElem.innerText = formatted;
  });


  // --- 2. UNLIMITED HEART SPAM SYSTEM ---
  const heartSpamContainer = document.getElementById("heartSpamContainer");
  const textHeartCountElem = document.getElementById("textHeartCount");
  const overlayHeartCountElem = document.getElementById("overlayHeartCount");
  const floatingHeartsContainer = document.getElementById("floatingHeartsContainer");
  const totalHeartsRef = ref(db, `livestream/${streamId}/stats/totalHearts`);

  onValue(totalHeartsRef, (snap) => {
    const count = snap.val() || 0;
    // Uses the new full number format
    const formatted = formatCount(count);
    textHeartCountElem.innerText = formatted;
    overlayHeartCountElem.innerText = formatted;
  });

  heartSpamContainer.addEventListener("click", () => {
    createFloatingHeart();
    // Adds +1 to heart count in database
    runTransaction(totalHeartsRef, (currentHearts) => {
      return (currentHearts || 0) + 1;
    });
  });

  // --- UPDATED REALISTIC HEART CREATION ---
  function createFloatingHeart() {
      const heart = document.createElement("div");
      heart.classList.add("floating-heart");
      // Use a variety of heart emojis/colors if desired, stick to red for now
      heart.innerHTML = "❤️"; 
      
      // 1. Randomize Starting Position (Horizontal)
      const randomLeft = Math.random() * 90 + 5; // 5% to 95% across
      heart.style.left = `${randomLeft}%`;

      // 2. Randomize Size
      const randomSize = Math.random() * 15 + 18; // 18px to 33px
      heart.style.fontSize = `${randomSize}px`;

      // 3. Randomize Physics Variables for CSS
      const duration = Math.random() * 2.5 + 2.5; // 2.5s to 5s duration
      const distance = -(Math.random() * 250 + 350); // -350px to -600px up
      const rotation = Math.random() * 720 - 360; // -360deg to +360deg spin
      const wobble = Math.random() * 50 - 25; // -25px to +25px sideways drift
      const scaleStart = Math.random() * 0.3 + 0.4; // Start small (0.4-0.7)
      const scaleEnd = Math.random() * 0.8 + 1.2; // End large (1.2-2.0)

      // Set custom properties
      heart.style.setProperty('--fly-duration', `${duration}s`);
      heart.style.setProperty('--fly-distance', `${distance}px`);
      heart.style.setProperty('--rotation-end', `${rotation}deg`);
      heart.style.setProperty('--wobble-dir', `${wobble}px`);
      heart.style.setProperty('--scale-start', `${scaleStart}`);
      heart.style.setProperty('--scale-end', `${scaleEnd}`);

      floatingHeartsContainer.appendChild(heart);

      // Cleanup matches max duration
      setTimeout(() => { heart.remove(); }, (duration * 1000) + 200);
  }

  // --- CHANGED: Now shows full number with commas (e.g. 1,533) instead of 1.5K
  function formatCount(num) {
    if (!num) return "0";
    return num.toLocaleString(); 
  }
</script>

<script>
window.onload = function () {
  const sources = [{ id: "player1", qualities: { 1080: "https://hnd-prod-catalyst-0.lp-playback.studio/hls/video+42celkrsxnhb4umi/1_0/index.m3u8?tkn=7b29bc0509b1a"}, defaultQuality: 1080 }];
  sources.forEach(src => {
    const video = document.getElementById(src.id);
    if (!video) return;
    let hls; let currentQuality = src.defaultQuality;
    function loadStream(quality) {
      const streamUrl = src.qualities[quality]; if (!streamUrl) return;
      if (hls) hls.destroy(); hls = new Hls({ capLevelToPlayerSize: true });
      hls.loadSource(streamUrl); hls.attachMedia(video);
      hls.on(Hls.Events.MANIFEST_PARSED, function () { video.play().catch(() => { video.muted = true; video.play(); }); });
    }
    
    // Plyr Config
    const player = new Plyr(video, { 
      autoplay: true, 
      muted: false, 
      seekTime: 10, 
      controls: ["play-large", "play", "mute", "airplay", "fullscreen"], 
      settings: ["quality", "speed", "captions"],
      hideControls: true, // Ensure this is on
      quality: { default: src.defaultQuality, options: Object.keys(src.qualities).map(Number), forced: true, onChange: (newQuality) => { currentQuality = newQuality; loadStream(newQuality); } } 
    });
    
    if (Hls.isSupported()) { loadStream(currentQuality); } else if (video.canPlayType("application/vnd.apple.mpegurl")) { video.src = src.qualities[currentQuality]; video.play(); }

    /* --- MOVE OVERLAY & SETUP EVENTS --- */
    const overlay = document.getElementById('videoOverlay');
    const floatContainer = document.getElementById('floatingHeartsContainer');
    
    if (player.elements.container && overlay) {
        player.elements.container.appendChild(overlay);
        player.elements.container.appendChild(floatContainer);
        
        // --- JS EVENTS TO SYNC OVERLAY HIDING ---
        player.on('controlshidden', () => {
             overlay.style.opacity = '0';
        });
        player.on('controlsshown', () => {
             overlay.style.opacity = '1';
        });
    }

    /* WATERMARK SETUP */
    const watermark = document.createElement('img');
    watermark.className = 'watermark';
    player.elements.container.appendChild(watermark);

    // --- LANDSCAPE / FULLSCREEN AUTOMATION ---
    player.on('enterfullscreen', async () => {
      try { if (screen.orientation && screen.orientation.lock) { await screen.orientation.lock('landscape'); } } catch (err) { console.warn('Auto-rotation not supported', err); }
    });
    player.on('exitfullscreen', async () => {
      try { if (screen.orientation && screen.orientation.unlock) { await screen.orientation.unlock(); } } catch (err) { console.warn('Orientation unlock not supported', err); }
    });
      if (window.screen && window.screen.orientation) {
       window.screen.orientation.addEventListener('change', () => {
          const type = window.screen.orientation.type;
          if (type.includes('landscape')) { if (!player.fullscreen.active) player.fullscreen.enter().catch(() => {}); } 
          else if (type.includes('portrait')) { if (player.fullscreen.active) player.fullscreen.exit(); }
       });
    }
  });
};
</script>

<script>
// Security Scripts
document.addEventListener('contextmenu', e => e.preventDefault());
document.addEventListener('keydown', e => { if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key.toUpperCase() === 'I' || e.key.toUpperCase() === 'J' || e.key.toUpperCase() === 'C')) || (e.ctrlKey && e.key.toUpperCase() === 'U')) { e.preventDefault(); alert('⚠️ Developer tools are disabled for security reasons.'); } });
window.addEventListener('keydown', e => { if (e.key === 'ContextMenu' || e.key === 'Apps') e.preventDefault(); });
</script>

<script>
// Modal script
const aboutBtn = document.getElementById("aboutBtn"), modal = document.getElementById("aboutModal"), closeBtn = modal.querySelector(".close");
aboutBtn.addEventListener("click", () => { modal.style.display = "block"; });
closeBtn.addEventListener("click", () => { modal.style.display = "none"; });
window.addEventListener("click", (e) => { if (e.target === modal) { modal.style.display = "none"; } });
</script>

<footer>
  &copy; 2025 <a href="https://x.com/101_livestream" target="_blank">LIVESTREAM 101</a> | All rights reserved.
  <div class="social-handles"><a href="https://t.me/livestream101ontg" target="_blank">Livestream101ontg</a></div>
</footer>

</body>
</html>
